<!--[* purpose of this template: build the pnForm to edit an instance of user *]-->

<!--[include file="KnowledgeBase_user_header.htm"]-->

<!--[if $mode == "edit"]-->
    <!--[gt text='Edit ticket' assign="templateTitle"]-->
<!--[elseif $mode == "create"]-->
    <!--[gt text='Create ticket' assign="templateTitle"]-->
<!--[else]-->
    <!--[gt text='Edit ticket' assign="templateTitle"]-->
<!--[/if]-->

<div class="z-frontendcontainer">

<!--[pnpagesetvar name="title" value=$templateTitle]-->
<h2><!--[$templateTitle]--></h2>
<br />
<!--[pnform cssClass="z-form"]-->

    <!--[* add validation summary and a <div> element for styling the form *]-->
    <!--[knowledgebaseFormFrame]-->
    <!--[*pnformvalidationsummary*]-->

    <!--[pnformsetinitialfocus inputId="subject"]-->

    <fieldset>
        <legend><!--[gt text='Content']--></legend>
        <div class="z-formrow">
            <!--[pnformlabel for="subject" __text='Subject']-->
            <!--[pnformtextinput id="subject" mandatory=true __title='Input the subject of the ticket' textMode="singleline" maxLength=255]-->
        </div>
        <div class="z-formrow">
            <!--[pnformlabel for="content" __text='Content']-->
            <!--[pnformtextinput id="content" mandatory=true __title='Input the content of the ticket' textMode="multiline" rows="8" cols="50"]-->
        </div>
    </fieldset>
    <fieldset>
        <legend><!--[gt text='Category']--></legend>

        <div class="z-formrow">
            <!--[pnformlabel for="category" __text='Category']-->
        <!--[foreach from=$categories key=property item=category]-->
            <!--[array_field_isset array=$__CATEGORIES__ field=$property assign="catExists"]-->
            <!--[if $catExists]-->
                <!--[array_field_isset array=$__CATEGORIES__.$property field="id" returnValue=1 assign="selectedValue"]-->
            <!--[else]-->
                <!--[assign var='selectedValue' value='0']-->
            <!--[/if]-->
            <!--[pnformcategoryselector id=$property mandatory=true __title='Choose the category' category=$category enableDBUtil=1 selectedValue=$selectedValue defaultValue='0' editLink=false]-->
        <!--[/foreach]-->
        </div>
    </fieldset>
<!--[if $mode ne "create"]-->
    <fieldset>
        <legend><!--[gt text='Statistics']--></legend>

        <div class="z-formrow">
            <!--[pnformlabel for="views" __text='Views']-->
            <!--[pnformintinput id="views" mandatory=false __title='Input the views of the ticket' maxLength=11 readOnly=true style="width: 80px; text-align: right"]-->
        </div>
        <div class="z-formrow">
            <!--[pnformlabel for="ratesup" __text='Rates up']-->
            <!--[pnformintinput id="ratesup" mandatory=false __title='Input the rates up of the ticket' maxLength=4 readOnly=true style="width: 80px; text-align: right"]-->
        </div>
        <div class="z-formrow">
            <!--[pnformlabel for="ratesdown" __text='Rates down']-->
            <!--[pnformintinput id="ratesdown" mandatory=false __title='Input the rates down of the ticket' maxLength=4 readOnly=true style="width: 80px; text-align: right"]-->
        </div>
    </fieldset>
    <fieldset>
        <legend><!--[gt text='Meta data']--></legend>
        <ul>
            <!--[pnusergetvar name="uname" uid=$cr_uid assign="username"]-->
            <li><!--[gt text='Created by %s' tag1=$username]--></li>
            <li><!--[gt text='Created on %s' tag1=$cr_date|pndate_format]--></li>
            <!--[pnusergetvar name="uname" uid=$lu_uid assign="username"]-->
            <li><!--[gt text='Updated by %s' tag1=$username]--></li>
            <li><!--[gt text='Updated on %s' tag1=$lu_date|pndate_format]--></li>
        </ul>
    </fieldset>
<!--[/if]-->
<!--[*
    <fieldset>
        <legend><!--[gt text='Hooks']--></legend>
        <!--[if $mode == "edit"]-->
            <!--[pnmodcallhooks hookobject="item" hookaction="modify" module="KnowledgeBase" hookid="ticket`$ticketid`"]-->
        <!--[elseif $mode == "create"]-->
            <!--[pnmodcallhooks hookobject="item" hookaction="new" module="KnowledgeBase"]-->
        <!--[else]-->
            <!--[pnmodcallhooks hookobject="item" hookaction="modify" module="KnowledgeBase" hookid="ticket`$ticketid`"]-->
        <!--[/if]-->
    </fieldset>
*]-->
    <!--[gt text='Really delete this ticket?' assign="deleteConfirmMsg"]-->

    <div class="z-formbuttons">
    <!--[if $mode == "edit"]-->
        <!--[pnformbutton commandName="update" __text='Update ticket']-->
        <!--[pnformbutton commandName="delete" __text='Delete ticket' confirmMessage=$deleteConfirmMsg]-->
    <!--[elseif $mode == "create"]-->
        <!--[pnformbutton commandName="create" __text='Create ticket']-->
    <!--[else]-->
        <!--[pnformbutton commandName="update" __text='OK']-->
    <!--[/if]-->
        <!--[pnformbutton commandName="cancel" __text='Cancel']-->
    </div>
  <!--[/knowledgebaseFormFrame]-->
<!--[/pnform]-->

</div>

<!--[include file="KnowledgeBase_user_footer.htm"]-->
